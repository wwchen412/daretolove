<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- fb OG -->
    <meta property="og:url" content="https://kkl.daretolove.tw/" />
    <meta property="og:type" content="video.movie" />
    <meta property="og:title" content="Dare to Love 勇敢愛 我的心情我的酒" />
    <meta property="og:description" content="如果能夠重來一次，你還會選擇離開嗎？" />
    <meta property="og:image" content="https://kkl.daretolove.tw/content/img/fbcover.png" />
    <meta property="og:image:width" content="800" />
    <meta property="fb:app_id" content="288053411702507">

    <title>Dare to Love 勇敢愛 我的心情我的酒</title>
    <link rel="stylesheet" href="content/css/main.css">
    <link rel="stylesheet" href="content/css/wine.css?108">
    <link rel="stylesheet" href="content/css/APlayer.min.css">
    <link rel="shortcut icon" type="image/x-icon" href="/content/img/favicon.png" />



    <!-- font -->
    <script src="https://use.typekit.net/wnv0scu.js"></script>
    <script>
        try {
            Typekit.load({
                async: true
            });
        } catch (e) {}

    </script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-115377158-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());
        gtag('config', 'UA-115377158-1');

    </script>
</head>

<body>
    <script>
        window.fbAsyncInit = function() {
            FB.init({
                appId: '288053411702507',
                xfbml: true,
                cookie: false,
                status: true,
                version: 'v2.7'
            });
        };
        (function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) {
                return;
            }
            js = d.createElement(s);
            js.id = id;
            js.src = "//connect.facebook.net/en_US/sdk.js";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));

        // 登入檢查
        function checkLoginState() {
            FB.getLoginStatus(function(response) {
                statusChangeCallback(response);
            });
        }
        // This is called with the results from from FB.getLoginStatus().
        function statusChangeCallback(response) {
            console.log('statusChangeCallback');
            console.log(response);

            if (response.status === 'connected') {
                // Logged into your app and Facebook.
                KKLAPI();
            } else {
                // The person is not logged into your app or we are unable to tell.
                // document.getElementById('status').innerHTML = 'Please log ' +
                //     'into this app.';
            }
        }

        // 登入成功後執行

        function KKLAPI() {
            // console.log('Welcome!  Fetching your information.... ');
            FB.api('/me', function(response) {
                console.log('Successful login for: ' + response.name);

            });
        }

    </script>

    <div id="wrap">
        <!-- header -->
        <div class="row no-gutters">
            <div class="col-12">
                <header>
                    <div class="nav-bar">
                        <nav class="container d-md-flex ">
                            <div class="nav-item mr-md-auto d-flex d-md-block justify-content-between p-md-0 p-2">
                                <a href="/" class="d-inline-block p-2 text-light">
                                    <img src="content/img/title.png" alt="" style="width: 150px;" >
                                </a>
                                <a class="d-inline-block d-md-none p-2 text-light" id="menu">
                                    <img src="content/img/menu.svg" alt="" width="30px">
                                </a>
                            </div>
                            <ul class="nav nav-stacked flex-column flex-md-row text-right text-md-center">
                                <li class="nav-item">
                                    <a href="index.html" class="d-block p-2 active">首頁</a>
                                </li>
                                <li class="nav-item">
                                    <a href="video.html" class="d-block p-2">線上單元劇</a>
                                </li>
                                <li class="nav-item">
                                    <a href="gallery.html" class="d-block p-2">劇照下載</a>
                                </li>
                                <li class="nav-item">
                                    <a href="wine.html" class="d-block p-2">心情酒譜</a>
                                </li>
                                <li class="nav-item">
                                    <a href="music.html" class="d-block p-2">主題曲</a>
                                </li>
                            </ul>
                        </nav>
                    </div>

                </header>
            </div>

        </div>

        <div class="container my-5">
            <div class="section-title text-center">
                <h3>第一步</h3>

            </div>
            <p class="text-center my-4">上傳照片並選擇一款最符合心情的調酒</p>
            <div class="upload-section row">

                <div class="btns d-flex justify-content-between  col-10 offset-1">
                    <a href="event.html">
                        <img alt="" src="content/img/back_btm.svg" width="40px" height="40px">
                    </a>

                    <label for="upload" class="btn btn-secondary text-light px-5" style="background:#666666">
                        <input type="file" class="d-none" id="upload" accept="image/*" onchange="loadFile(event)"> 上傳照片
                    </label>
                </div>
                <div class="col-10 offset-1">
                    <div class="img-wrap position-relative">
                        <!-- 上傳的圖 -->
                        <div class="client-img" style="background:#eee;">
                            <img src="content/img/demo.png" alt="" class="img-fluid d-block">
                        </div>
                        <div class="arrow prev position-absolute">◀</div>
                        <div class="arrow next position-absolute">▶</div>
                        <!-- 框框 -->
                        <div class="img-wire position-absolute">
                            <img src="content/img/frame01.png" alt="">
                        </div>
                    </div>
                </div>
                <div class="col-12 text-center">
                    <a href="step2.html" class="btn btn-danger px-5 mt-3 mb-4 nextBtn">下一步</a>
                </div>
            </div>
        </div>

        <footer class="text-center">
            <a href="http://www.kkl.com.tw/" target="_blank">
                <img src="content/img/logo.svg?2" alt="">
            </a>
            <p class="text-secondary py-sm-3" style="font-size: 12px;">金門酒廠實業股份有限公司版權所有<br>Copyright © Kinmen Kaoliang Liquor Inc. All Rights Reserved.</p>

        </footer>

    </div>
    <!-- 標語 -->
    <div class="position-fixed signgal p-1">
        <img src="content/img/footer_fixed_font.svg?2" alt="" class="img-fluid">
    </div>
    <!-- jQuery JS 1.12.4 -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="script/bootstrap.min.js"></script>
    <script src="script/bootstrap.bundle.min.js"></script>
    <script src="script/APlayer.min.js"></script>
    <script src="script/jquery.cookie.js"></script>
    <script src="script/all.js?t=3"></script>

    <script type="text/javascript">
        {
            // 可用的框框
            let frames = ['content/img/frame01.png',
                    'content/img/frame02.png',
                    'content/img/frame03.png',
                    'content/img/frame04.png'
                ],
                clickTimes = 0,
                frame = document.querySelector('.img-wire img'),
                prev = document.querySelector('.arrow.prev'),
                next = document.querySelector('.arrow.next');
            let imgBase64 = '';
            // 選擇框框
            prev.addEventListener('click', prevBtn);
            next.addEventListener('click', nextBtn);

            function prevBtn() {
                if (clickTimes <= frames.length && clickTimes > 0) {
                    clickTimes--
                    frame.setAttribute('src', frames[clickTimes])
                } else if (clickTimes = 4) {
                    clickTimes = 3
                    frame.setAttribute('src', frames[clickTimes])
                }

            }

            function nextBtn() {
                if (clickTimes < frames.length - 1 && clickTimes >= 0) {
                    clickTimes++
                    frame.setAttribute('src', frames[clickTimes])
                } else if (clickTimes = 1) {
                    clickTimes = 0
                    frame.setAttribute('src', frames[clickTimes])
                }

            }
            // 選擇上傳的檔案變換圖
            var loadFile = function(event) {
                var reader = new FileReader();
                reader.onload = function() {
                    var output = document.querySelector('.client-img img');
                    output.src = reader.result;
                    imgBase64 = reader.result;
                };
                reader.readAsDataURL(event.target.files[0]);
            };
            // 按下一步後送出圖片資料以及選擇的圖框
            document.querySelector('.nextBtn').addEventListener('click', function(event) {
                event.preventDefault();
                // 選擇的框框
                console.log(frame.getAttribute('src'));
                // 圖片轉出的base64
                console.log(imgBase64);
                // 送出後轉跳
                window.location.href = 'step2.html';
            })

        }

    </script>


</body>

</html>
